<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <title>综合信息告示</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="css/overviewNotice.css">
</head>
<body>
<div class="title">
    <img class="title-img" src="./images/top_title4@2x.png" alt="">
    <div class="time-sign">
        <p><span class="current-time">2020年5月23日 星期六</span> <span class="today-weather">晴天</span></p>
        <p class="level-explain">
            <span >保障等级: <b class="bzdj"></b></span>
            <span >运行图: <b class="Yxth"></b></span>
        </p>
    </div>
</div>
<div class="content-box clearfix" >
    <div class="left-content">
        <div class="item left-items">
            <table class="table-item">
                <tbody id="oneItem">
                <tr>
                    <td>
                        <span class="tab-sign">隔离开关</span>
                        股道
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        车次
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        车号
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        作业
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                </tbody>
            </table>
            <div class="no-data">暂无数据</div>
        </div>
        <div class="item left-items">
            <table class="table-item">
                <tbody id="twoItem">
                <tr>
                    <td>
                        <span class="tab-sign">隔离开关</span>
                        股道
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        车次
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        车次
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td> 作业 </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                </tbody>
            </table>
            <div class="no-data">暂无数据</div>
        </div>
        <div class="item left-items">
            <table class="table-item">
                <tbody id="threeItem">
                <tr>
                    <td>
                        <span class="tab-sign">隔离开关</span>
                        股道
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        车次
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        车号
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        作业
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="no-data">暂无数据</div>
        </div>
        <div class="item left-items">
            <table class="table-item">
                <tbody id="fourItem">
                <tr>
                    <td>
                        <span class="tab-sign">隔离开关</span>
                        股道
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>


                </tr>
                <tr>
                    <td>
                        车次
                    </td>
                    <td>
                        <div>
                            <b class="one">22</b>
                            <p>01A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="two">22</b>
                            <p>02A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="three">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="four">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="five">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="six">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                    <td>
                        <div>
                            <b class="seven">22</b>
                            <p>03A</p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        股道
                    </td>

                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>  作业 </td>
                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                    <td>
                        <div class="round-box">
                            <p>检修</p>
                            <p>轨道</p>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="no-data">暂无数据</div>
        </div>
    </div>
    <div class="middle-content ">
        <div class="type-title">特种路线</div>
        <div class="item">
            <div class="item-title clearfix">
                <span>轨道</span>
                <span>车号(单机/编组)</span>
            </div>
            <table class="tab-list">
                <tbody id="tabBody">
                <tr>
                    <td>
                        <div class="td-title">
                            <span>无接触网</span>
                            调二
                            <i>(22)</i>
                        </div>
                    </td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                </tr>
                <tr>
                    <td>
                        <div class="td-title">
                            <span>无接触网</span>
                            调一
                            <i>(22)</i>
                        </div>
                    </td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                </tr>
                <tr>
                    <td>
                        <div class="td-title">
                            <span>无接触网</span>
                            平板
                            <i>(22)</i>
                        </div>
                    </td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                </tr>
                <tr>
                    <td>
                        <div class="td-title">
                            <span>无接触网</span>
                            材料
                            <i>(22)</i>
                        </div>
                    </td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                </tr>
                <tr>
                    <td>
                        <div class="td-title">
                            <span>无接触网</span>
                            材料
                            <i>(22)</i>
                        </div>
                    </td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                    <td>0401</td>
                </tr>
                </tbody>
            </table>
            <div class="no-data">暂无数据</div>
        </div>
        <div class="type-title">停/送电-钥匙</div>
        <div class="item">
            <h5>检修股道</h5>
            <div class="gudao-list jxList" id="jxList">
                <span>01A</span>
                <span>01A</span>
                <span>01A</span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="no-data gudao-list">暂无数据</div>
        </div>
        <div class="item">
            <h5>停车股道</h5>
            <div class="gudao-list tcList" id="tcList">
                <span>01A</span>
                <span>01A</span>
                <span>01A</span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span>01A</span>
                <span>01A</span>
                <span>01A</span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="no-data gudao-list">暂无数据</div>
        </div>
    </div>
    <div class="right-content ">
        <div class="type-title">关键作业盯控制</div>
        <div class="item">
            <table class="table-list">
                <tbody>
                <tr>
                    <td>调车/洗车作业</td>
                    <td>车号：
                        <div class="info xcList" >
                            <span>014A、</span>
                            <!--  <span>014B、</span>
                              <span>014C</span>-->
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>全场触网停/送</td>
                    <td>触网：<div class="info jcwList">触网信息</div></td>
                </tr>
                <tr>
                    <td>二级道岔作业</td>
                    <td>触网：<div class="info dcList">
                        不玩就换行显示不玩就换行显示不玩就换行不玩就换行</div></td>
                </tr>
                </tbody>
            </table>
            <div class="no-data">暂无数据</div>
        </div>
        <div class="type-title">注意事项</div>
        <div class="item careful-box">
            <ul class="careful-list">
                <li>这里是注意事项这里是注意事项这里是注意事项这里是注意事项</li>
                <li>这里是注意事项这里是注意事项这里是注意事项这里是注意事项</li>
                <li>这里是注意事项这里是注意事项这里是注意事项这里是注意事项</li>
                <li>这里是注意事项这里是注意事项这里是注意事项这里是注意事项</li>
                <li>这里是注意事项这里是注意事项这里是注意事项这里是注意事项</li>
                <li>这里是注意事项这里是注意事项这里是注意事项这里是注意事项</li>
            </ul>
            <div class="no-data">暂无数据</div>
        </div>
    </div>
</div>
</body>
<script src="js/jquery.min.js"></script>
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/common.js"></script>
<script>
    var timer=null;
    var ws=null;//WebSocket实例
    var GetSpecialLineDataFlag=true;//特殊路线数据
    var GetOutOrInBlackDataFlag=true;//停/送电-钥匙数据
    var GetKeyWorkDataFlag=true;//关键作业盯控制
    var GetMattersNeedingThingsFlag=true;//注意事项数据

    $(function () {
        /***********隐藏滚动条***********/
        $("#rightTable").mCustomScrollbar({
            theme:"minimal"
        });
        $("#leftTable").mCustomScrollbar({
            theme:"minimal"
        });
        $("#tcList").mCustomScrollbar({
            theme:"minimal"
        });
        $("#jxList").mCustomScrollbar({
            theme:"minimal"
        });

        addWebSocket();//默认执行第一次
        timer=setInterval(function () {//根据状态判断时候重新建立连接
            if(ws.readyState!=1){//未连接
                addWebSocket()
            }
        },1000)
        /**********示例***********/
        let mm=[
              {"gdfqys":"#FFFF00","stationTrack":"临修线","gdfqbh":"SH04D1","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFF00","stationTrack":"洗车线","gdfqbh":"SH04D1","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"1AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"1BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"2AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"2BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"3AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"3BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"4AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"4BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"5AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"5BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"6AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"6BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"7AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"7BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"8AG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#00FFFF","stationTrack":"8BG","gdfqbh":"SH04D3","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"9AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"9BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"10AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"10BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"11AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"11BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"12AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"12BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"13AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"13BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"14AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"14BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"15AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"15BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"16AG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFFFF","stationTrack":"16BG","gdfqbh":"SH04D2","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFF00","stationTrack":"17AG","gdfqbh":"SH04D1","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFF00","stationTrack":"17BG","gdfqbh":"SH04D1","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFF00","stationTrack":"18G","gdfqbh":"SH04D1","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFF00","stationTrack":"19G","gdfqbh":"SH04D1","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FFFF00","stationTrack":"20G","gdfqbh":"SH04D1","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#0000FF","stationTrack":"21G","gdfqbh":"SH04D4","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#0000FF","stationTrack":"22G","gdfqbh":"SH04D4","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#0000FF","stationTrack":"23G","gdfqbh":"SH04D4","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#0000FF","stationTrack":"24G","gdfqbh":"SH04D4","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FF0000","stationTrack":"TC67Z","gdfqbh":"SH04D5","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FF0000","stationTrack":"TC69Z","gdfqbh":"SH04D5","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FF0000","stationTrack":"TC72Z","gdfqbh":"SH04D5","trianNumber": "0101","trainNo": "0402","work": "四日检",},
            {"gdfqys":"#FF0000","stationTrack":"TC74Z","gdfqbh":"SH04D5","trianNumber": "0101","trainNo": "0402","work": "四日检",}]
        GetStationTrackAndTrainInfoData(JSON.stringify(mm))
        let speal=[
            {
                "stationTrack": "调一",
                "trainNoList": [
                    "0401",
                    "0402",
                    "0403"
                ]
            },
            {
                "stationTrack": "调二",
                "trainNoList": [
                    "0404",
                    "0405",
                    "0406"
                ]
            },
            {
                "stationTrack": "调三",
                "trainNoList": []
            },
            {
                "stationTrack": "调四",
                "trainNoList": []
            },
            {
                "stationTrack": "调五",
                "trainNoList": [
                    "G0401",
                    "G0402",
                    "G0403"
                ]
            }
        ]
        SpecialLineData(JSON.stringify(speal))
        let tc={
            "tcList": [
                "L-10A",
                "L-10B",
                "L-11A",
                "L-11B",
                "L-12B"
            ],
            "jxList": [
                "L-5A",
                "L-6A",
                "L-7A",
                "L-8A",
                "L-9A"
            ]
        }

        tcjxArr(JSON.stringify(tc))
        let crux={
            "dcList": [
            "0405",
            "0406",
            "0407",
            "0408"
        ],
              "xcList": [
            "0401",
            "0402",
            "0403",
            "0404"
        ],
              "jcwList": [
            "L-4A",
            "L-5A",
            "L-6A",
            "L-7A"
        ]
        }
        cruxData(JSON.stringify(crux))
        let careData=[
            {
                "bt": "123",
                "nr": "23",
                "ksrq": "2020-03-25 00:00:00",
                "jsrq": "2020-04-10 00:00:00",
            },
            {
                "bt": "多个梵蒂冈",
                "nr": "水电费水电费第三方是否都是123",
                "ksrq": "2020-01-17 00:00:00",
                "jsrq": "2020-01-17 00:00:00",
            },
            {
                "bt": "多个梵蒂冈",
                "nr": "水电费水电费第三方是否都是123,水电费水电费第三方是否都是123",
                "ksrq": "2020-01-17 00:00:00",
                "jsrq": "2020-01-17 00:00:00",
            }
        ]

        carefulData(JSON.stringify(careData))
        /**********示例***********/
        let h = window.innerHeight;
        let w = 120;
        if (window.innerWidth < 1920) {
            if (window.innerWidth == 1600) {
                w = 100
            } else if (window.innerWidth == 1440) {
                w = 90
            } else if (window.innerWidth == 1366) {
                w = 85
            }
        }
        let boxH=Number.parseInt((h - w - 70 )/4)
        $(".left-items").css('height',boxH+'px')
        $(".table-item td").css('height',boxH/4+'px')
        $(".careful-box").css('height',(h - w - 70-235)+'px')
        $(".gudao-list").css('height',(h - w - 70-515)/2+'px')
        $(".gudao-list span").css({'height':(h - w - 70-515)/6+'px','line-height':(h - w - 70-515)/6+'px'})


    })


    function addWebSocket(obj,type) {
        ws = new WebSocket("ws://localhost:8080/DTCGCW/ZhWebSocket.ws?cdid="+cdidx+'connectType=0');
        let receiveMsg='';
        ws.onopen = function(){//连接成功
            /* ws.send("{\"head\":\"GetKeyWorkData\",\"message\":\"\"}");//得到关键作用及监控数据
             ws.send('{\"head\":\"GetMattersNeedingThings\",\"message\":\"\"}')  //得到注意事项数据
             ws.send("{\"head\":\"GetOutOrInBlackData\",\"message\":\"\"}");//得到停/送电-钥匙数据
             ws.send("{\"head\":\"GetSpecialLineData\",\"message\":\"\"}");  //得到特殊路线数据*/

            ws.send("{\"head\":\"GetStationTrackAndTrainInfoData\",\"message\":\"\"}");//得到股道、车次、车号、作业数据
        };
        ws.onmessage = function(evt) {//接收数据
            console.log( "Received Message: " + evt.data);

            if(evt.data==='开始'){
                receiveMsg=''
            }
            if(evt.data.indexOf('结束')!=-1){
                $(".table-item,.jxList,.tcList,.tab-list,.table-list,.careful-list").css("display","block")
                $(".no-data").css("display","none")
                let headStr=evt.data.split('结束:')[1];

                if(headStr==='GetStationTrackAndTrainInfoData') {//得到股道、车次、车号、作业数据
                    GetStationTrackAndTrainInfoData(receiveMsg)
                    if(GetSpecialLineDataFlag){
                        ws.send("{\"head\":\"GetSpecialLineData\",\"message\":\"\"}");  //得到特殊路线数据
                    }
                }else if(headStr==='GetSpecialLineData'){//特种路线
                    SpecialLineData(receiveMsg)
                    if(GetOutOrInBlackDataFlag){
                        ws.send("{\"head\":\"GetOutOrInBlackData\",\"message\":\"\"}");//得到停/送电-钥匙数据
                    }

                }else if(headStr==='GetMattersNeedingThings'){//意事项数据
                    carefulData(receiveMsg)
                }else if(headStr==='GetOutOrInBlackData'){
                    tcjxArr(receiveMsg)
                    if(GetKeyWorkDataFlag){
                        ws.send("{\"head\":\"GetKeyWorkData\",\"message\":\"\"}");//得到关键作用及监控数据
                    }
                }else if(headStr==='GetKeyWorkData'){//关键作用及监控数据
                    cruxData(receiveMsg)
                    if(GetMattersNeedingThingsFlag){
                        ws.send('{\"head\":\"GetMattersNeedingThings\",\"message\":\"\"}')  //得到注意事项数据
                    }
                }
            }else{
                receiveMsg+=evt.data
            }
        };
        ws.onclose = function(evt) {
        };
        ws.onerror = function () {
            $(".table-item,.jxList,.tcList,.tab-list,.table-list,.careful-list").css("display","none")
            $(".no-data").css("display","block")
        };
    }
    /***********特殊路线数据**********/
    function SpecialLineData(str) {
        let arr=JSON.parse(str)
        let tableStr=''
        for (let i=0;i<arr.length;i++){
            tableStr+=` <tr>
                        <td>
                            <div class="td-title">
                                <span>无接触网</span>
                                ${arr[i].stationTrack?arr[i].stationTrack:''}
                                <i>(22)</i>
                            </div>
                        </td>
                        <td>${arr[i].trainNoList&&arr[i].trainNoList[0]?arr[i].trainNoList[0]:''} </td>
                        <td>${arr[i].trainNoList&&arr[i].trainNoList[1]?arr[i].trainNoList[1]:''} </td>
                        <td>${arr[i].trainNoList&&arr[i].trainNoList[2]?arr[i].trainNoList[2]:''} </td>
                        <td>${arr[i].trainNoList&&arr[i].trainNoList[3]?arr[i].trainNoList[3]:''} </td>
                        <td>${arr[i].trainNoList&&arr[i].trainNoList[4]?arr[i].trainNoList[4]:''} </td>
                    </tr>`
        }
        $("#tabBody").html(tableStr)
        GetSpecialLineDataFlag=false
    }
    function GetStationTrackAndTrainInfoData(str) {//股道、车次、车号、作业数据
        let arr=JSON.parse(str)
        if(!arr){
            return arr
        }else {
            arr=Array.from(arr)
        }
        let len=arr.length/4
        let remainder = arr%4;
        let [s1,s2,s3,s4]=['','','','']
        if(remainder==0){
            s1=changArr(arr.slice(0,len))
            s2=changArr(arr.slice(len,len*2))
            s3=changArr(arr.slice(len*2,len*3))
            s4=changArr(arr.slice(len*3,len*4))
        }else{
            s1=changArr(arr.slice(0,len+1))
            s2=changArr(arr.slice(len+1,len*2+1))
            s3=changArr(arr.slice(len*2+1,len*3+1))
            s4=changArr(arr.slice(len*3+1,len*4+1))
        }
        $("#oneItem").html(s1)
        $("#twoItem").html(s2)
        $("#threeItem").html(s3)
        $("#fourItem").html(s4)

        let h = window.innerHeight;
        let w = 120;
        if (window.innerWidth < 1920) {
            if (window.innerWidth == 1600) {
                w = 100
            } else if (window.innerWidth == 1440) {
                w = 90
            } else if (window.innerWidth == 1366) {
                w = 85
            }
        }
        let boxH=Number.parseInt((h - w - 70 )/4)
        $(".left-items").css('height',boxH+'px')
        $(".table-item td").css('height',boxH/4+'px')

    }

    function changArr(arr) {
        let [tr0,tr1,tr2,tr3]=['','','','']
        for (let i=0;i<arr.length;i++){
            if(i==0){
                tr0+="<td><span class='tab-sign'>隔离开关</span>股道</td>"
                tr1+="<td>车次</td>"
                tr2+="<td>车号</td>"
                tr3+="<td>作业</td>"
            }else{
                tr0+=`<td><div><b style='background-color:${arr[i].gdfqys}'>${arr[i].gdfqbh?arr[i].gdfqbh:''}</b> <p>${arr[i].stationTrack? arr[i].stationTrack:''}</p> </div></td>`;
                tr1+=`<td><div>${ arr[i].trianNumber ? arr[i].trianNumber:"" }</div></td>`
                tr2+=`<td><div>${arr[i].trainNo ? arr[i].trainNo:''}</div></td>`
                tr3+=`<td><div>${arr[i].work ? arr[i].work:''}</div></td>`
            }
        }
        return `<tr> ${tr0}</tr> <tr>${tr1} </tr> <tr> ${tr2} </tr> <tr>${tr3}</tr>`;
    }

    function tcjxArr(str){//停车股道集合
        let dataObj=JSON.parse(str)
        if(dataObj.tcList){
            tcListData(dataObj.tcList)
        }
        if(dataObj.jxList){//检修股道集合
            jxListData(dataObj.jxList)
        }
        GetOutOrInBlackDataFlag=false
    }

    /***********得到停/送电-钥匙数据**********/
    function jxListData(arr) {//检修
        console.log(arr)
        let tableStr=''
        let len=arr.length>15?arr.length:15;
        for (let i=0;i<len;i++){
            tableStr+=` <span>${arr[i]?arr[i]:''}</span>`
        }
        console.log(tableStr)
        $("#jxList").html(tableStr)
    }
    function tcListData(arr) {//停车
        let tableStr=''
        let len=arr.length>15?arr.length:15;
        for (let i=0;i<len;i++){
            tableStr+=` <span>${arr[i]?arr[i]:''}</span>`
        }
        $("#tcList").html(tableStr)
    }
    /***********注意事项**********/
    function carefulData(str) {
        let arr=JSON.parse(str)
        let tableStr=''
        for (let i=0;i<arr.length;i++){
            tableStr+=` <li>${arr[i].nr}</li>`
        }
        $(".careful-list").html(tableStr)
        GetMattersNeedingThingsFlag=false
    }

    function cruxData(str) {//关键作业盯控制
        let dataObj=JSON.parse(str)
        if(dataObj.xcList&&dataObj.xcList.length>0){
            let str= arrChangStr(dataObj.xcList)
            $(".xcList").html(str)
        }
        if(dataObj.dcList&&dataObj.dcList.length>0){
            let str= arrChangStr(dataObj.dcList)
            $(".dcList").html(str)
        }
        if(dataObj.jcwList&&dataObj.jcwList.length>0){
            let str= arrChangStr(dataObj.jcwList)
            $(".jcwList").html(str)
        }
        GetMattersNeedingThingsFlag=false
    }
    function arrChangStr(arr) {
        let str='';
        arr.forEach((item,index)=>{
            if(index==arr.length-1){
                str +=`<span> ${item} </span>`
            }else{
                str +=`<span> ${item}、</span>`
            }
        })
        return str;
    }
</script>
</html>
